
凭证管理
=======================

说明
-----------------------
- 管理凭证

1、凭证列表、新增凭证、批量删除凭证 API
-----------------------------------------------

**请求方式：**    GET（查询） POST（新增） DELETE（批量删除）


**请求地址：**    /api/project/credential/


**Content-Type：**
::
    新增数据的时候需要指定Content-Type，以下对Content-Type进行说明:

    application/x-www-form-urlencoded —— 表示通过表单方式提交
    application/json —— 表示传入数据为json格式字符串


**查询参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| offset                 | int        | 否         | 数据起始位置                                   |
+------------------------+------------+------------+------------------------------------------------+
| limit                  | int        | 否         | 查询条数                                       |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 否         | 凭证名称                                       |
+------------------------+------------+------------+------------------------------------------------+
| search                 | string     | 否         | 模糊查询，查询字段为name和user_name            |
+------------------------+------------+------------+------------------------------------------------+



**输入参数（新增）：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| id                     | int        | 是         | credential id                                  |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 是         | 凭证名称                                       |
+------------------------+------------+------------+------------------------------------------------+
| description            | string     | 否         | 描述                                           |
+------------------------+------------+------------+------------------------------------------------+
| type                   | string     | 是         | 凭证类型(必需)                                 |
+------------------------+------------+------------+------------------------------------------------+
| type_name              | string     | 是         | 凭证类型中文名称(只读)                         |
+------------------------+------------+------------+------------------------------------------------+
| user_name              | string     | 否         | 用户名                                         |
+------------------------+------------+------------+------------------------------------------------+
| password               | string     | 否         | 密码                                           |
+------------------------+------------+------------+------------------------------------------------+
| private_key            | text       | 否         | ssh私钥                                        |
+------------------------+------------+------------+------------------------------------------------+
| passphrase             | string     | 否         | ssh私钥密码                                    |
+------------------------+------------+------------+------------------------------------------------+
| become_method          | string     | 否         | 切换方式                                       |
+------------------------+------------+------------+------------------------------------------------+
| become_user            | string     | 否         | 切换用户                                       |
+------------------------+------------+------------+------------------------------------------------+
| become_pass            | string     | 否         | 切换密码                                       |
+------------------------+------------+------------+------------------------------------------------+
| vault_password         | string     | 否         | Vault密码                                      |
+------------------------+------------+------------+------------------------------------------------+
| vault_id               | string     | 否         | Vault Id                                       |
+------------------------+------------+------------+------------------------------------------------+
| key_id                 | string     | 否         | Key Id                                         |
+------------------------+------------+------------+------------------------------------------------+
| key_secret             | string     | 否         | Key Secret                                     |
+------------------------+------------+------------+------------------------------------------------+

**输出参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| name                   | string     | 是         | 凭证名称                                       |
+------------------------+------------+------------+------------------------------------------------+
| description            | string     | 否         | 描述                                           |
+------------------------+------------+------------+------------------------------------------------+
| type                   | string     | 是         | 凭证类型(必需)                                 |
+------------------------+------------+------------+------------------------------------------------+
| type_name              | string     | 是         | 凭证类型中文名称(只读)                         |
+------------------------+------------+------------+------------------------------------------------+
| user_name              | string     | 否         | 用户名                                         |
+------------------------+------------+------------+------------------------------------------------+
| password               | string     | 否         | 密码                                           |
+------------------------+------------+------------+------------------------------------------------+
| private_key            | text       | 否         | ssh私钥                                        |
+------------------------+------------+------------+------------------------------------------------+
| passphrase             | string     | 否         | ssh私钥密码                                    |
+------------------------+------------+------------+------------------------------------------------+
| become_method          | string     | 否         | 切换方式                                       |
+------------------------+------------+------------+------------------------------------------------+
| become_user            | string     | 否         | 切换用户                                       |
+------------------------+------------+------------+------------------------------------------------+
| become_pass            | string     | 否         | 切换密码                                       |
+------------------------+------------+------------+------------------------------------------------+
| vault_password         | string     | 否         | Vault密码                                      |
+------------------------+------------+------------+------------------------------------------------+
| vault_id               | string     | 否         | Vault Id                                       |
+------------------------+------------+------------+------------------------------------------------+
| key_id                 | string     | 否         | Key Id                                         |
+------------------------+------------+------------+------------------------------------------------+
| key_secret             | string     | 否         | Key Secret                                     |
+------------------------+------------+------------+------------------------------------------------+

**批量删除参数：**

+------------------------+------------+-------------------+-------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**       |**说明**                                         |
+------------------------+------------+-------------------+-------------------------------------------------+
| pk                     | string     | 与pk[]不能都为空  | 主键，多个主键用半角逗号隔开。通过http body传入 |
+------------------------+------------+-------------------+-------------------------------------------------+
| pk[]                   | array      | 与pk不能都为空    | 主键数组。通过http body传入                     |
+------------------------+------------+-------------------+-------------------------------------------------+

**排序：**

+------------------------+------------+-------------------+---------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**       |**说明**                                           |
+------------------------+------------+-------------------+---------------------------------------------------+
|                        |            |                   |   一般默认按id倒叙                                |
| ordering               | string     | 否                | - ordering=id表示按id排序ordering=-id表示按id倒叙 |
|                        |            |                   | - 多个字段排序用半角逗号分隔                      |
+------------------------+------------+-------------------+---------------------------------------------------+

**GET返回数据例子：**
::

    {
        "count": 2,
        "next": null,
        "previous": null,
        "results": [
            {
                "id": 2,
                "name": "111",
                "description": "1111",
                "type": "ssh",
                "type_name": "ssh",
                "user_name": "测试",
                "password": "1111",
                "private_key": "1111",
                "passphrase": "1111",
                "become_method": "sudo",
                "become_user": "111",
                "become_pass": "111",
                "vault_password": "",
                "vault_id": "",
                "key_id": "",
                "key_secret": "",
                "cuser": 1
            },
            {
                "id": 1,
                "name": "测试",
                "description": "1111",
                "type": "user_pwd",
                "type_name": "用户名密码",
                "user_name": "",
                "password": "",
                "private_key": "",
                "passphrase": "",
                "become_method": "sudo",
                "become_user": "",
                "become_pass": "",
                "vault_password": "",
                "vault_id": "",
                "key_id": "",
                "key_secret": "",
                "cuser": 1
            }
        ]
    }

**新增凭证返回数据例子：**
::
    {
        "id": 1,
        "name": "测试",
        "description": "1111",
        "type": "user_pwd",
        "type_name": "用户名密码",
        "user_name": "",
        "password": "",
        "private_key": "",
        "passphrase": "",
        "become_method": "sudo",
        "become_user": "",
        "become_pass": "",
        "vault_password": "",
        "vault_id": "",
        "key_id": "",
        "key_secret": "",
        "cuser": 1
    }


2、获取单个凭证，修改凭证、删除凭证 API
--------------------------------------

**请求方式：**    GET（查询） PUT（修改） PATCH（修改） DELETE（删除）

**请求地址：**    /api/project/credential/1/
::

    请求地址中1为凭证的id


**输入/输出参数：**   见章节1中输入和输出参数说明，修改数据时输入参数均为非必须

**返回数据例子：**
::
    {
        "id": 1,
        "name": "测试",
        "description": "1111",
        "type": "user_pwd",
        "type_name": "用户名密码",
        "user_name": "",
        "password": "",
        "private_key": "",
        "passphrase": "",
        "become_method": "sudo",
        "become_user": "",
        "become_pass": "",
        "vault_password": "",
        "vault_id": "",
        "key_id": "",
        "key_secret": "",
        "cuser": 1
    }
